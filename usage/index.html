<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="csvtk - CSV/TSV toolkit"> 
    <meta name="author" content="shenwei356"> 
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Usage - csvtk - CSV/TSV Toolkit</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">csvtk - CSV/TSV Toolkit</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../download/">Download</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documents <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Usage</a>
</li>

                        
                            
<li >
    <a href="../tutorial/">Tutorial</a>
</li>

                        
                            
<li >
    <a href="../chinese/">中文介绍</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../bioinf/">More tools</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../download/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../tutorial/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/shenwei356/csvtk/edit/master/docs/usage.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#usage-and-examples">Usage and Examples</a></li>
            <li class="second-level"><a href="#before-use">Before use</a></li>
                
            <li class="second-level"><a href="#table-of-contents">Table of Contents</a></li>
                
            <li class="second-level"><a href="#csvtk">csvtk</a></li>
                
            <li class="second-level"><a href="#headers">headers</a></li>
                
            <li class="second-level"><a href="#dim">dim</a></li>
                
            <li class="second-level"><a href="#summary">summary</a></li>
                
            <li class="second-level"><a href="#pretty">pretty</a></li>
                
            <li class="second-level"><a href="#transpose">transpose</a></li>
                
            <li class="second-level"><a href="#csv2json">csv2json</a></li>
                
            <li class="second-level"><a href="#csv2md">csv2md</a></li>
                
            <li class="second-level"><a href="#xlsx2csv">xlsx2csv</a></li>
                
            <li class="second-level"><a href="#head">head</a></li>
                
            <li class="second-level"><a href="#concat">concat</a></li>
                
            <li class="second-level"><a href="#sample">sample</a></li>
                
            <li class="second-level"><a href="#cut">cut</a></li>
                
            <li class="second-level"><a href="#uniq">uniq</a></li>
                
            <li class="second-level"><a href="#freq">freq</a></li>
                
            <li class="second-level"><a href="#inter">inter</a></li>
                
            <li class="second-level"><a href="#grep">grep</a></li>
                
            <li class="second-level"><a href="#filter">filter</a></li>
                
            <li class="second-level"><a href="#filter2">filter2</a></li>
                
            <li class="second-level"><a href="#join">join</a></li>
                
            <li class="second-level"><a href="#split">split</a></li>
                
            <li class="second-level"><a href="#splitxlsx">splitxlsx</a></li>
                
            <li class="second-level"><a href="#collapse">collapse</a></li>
                
            <li class="second-level"><a href="#add-header">add-header</a></li>
                
            <li class="second-level"><a href="#del-header">del-header</a></li>
                
            <li class="second-level"><a href="#rename">rename</a></li>
                
            <li class="second-level"><a href="#rename2">rename2</a></li>
                
            <li class="second-level"><a href="#replace">replace</a></li>
                
            <li class="second-level"><a href="#mutate">mutate</a></li>
                
            <li class="second-level"><a href="#mutate2">mutate2</a></li>
                
            <li class="second-level"><a href="#gather">gather</a></li>
                
            <li class="second-level"><a href="#sort">sort</a></li>
                
            <li class="second-level"><a href="#plot">plot</a></li>
                
            <li class="second-level"><a href="#plot-hist">plot hist</a></li>
                
            <li class="second-level"><a href="#plot-box">plot box</a></li>
                
            <li class="second-level"><a href="#plot-line">plot line</a></li>
                
            <li class="second-level"><a href="#genautocomplete">genautocomplete</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="usage-and-examples">Usage and Examples</h1>
<h2 id="before-use">Before use</h2>
<p><strong>Attention</strong></p>
<ol>
<li>The CSV parser requires all the lines have same number of fields/columns.
    Even lines with spaces will cause error.
    Use '-I/--ignore-illegal-row' to skip these lines if neccessary.</li>
<li>By default, csvtk thinks your files have header row, if not, switch flag <code>-H</code> on.</li>
<li>Column names better be unique.</li>
<li>By default, lines starting with <code>#</code> will be ignored, if the header row
    starts with <code>#</code>, please assign flag <code>-C</code> another rare symbol, e.g. <code>'$'</code>.</li>
<li>By default, csvtk handles CSV files, use flag <code>-t</code> for tab-delimited files.</li>
<li>If <code>"</code> exists in tab-delimited files, use flag <code>-l</code>.</li>
<li>Do not mix use digital fields and column names.</li>
</ol>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->

<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#csvtk">csvtk</a></li>
</ul>
<p><strong>Information</strong></p>
<ul>
<li><a href="#headers">headers</a></li>
<li><a href="#dim">dim</a></li>
<li><a href="#summary">summary</a></li>
</ul>
<p><strong>Format conversion</strong></p>
<ul>
<li><a href="#pretty">pretty</a></li>
<li><a href="#transpose">transpose</a></li>
<li><a href="#csv2md">csv2md</a></li>
<li><a href="#csv2json">csv2json</a></li>
<li><a href="#xlsx2csv">xlsx2csv</a></li>
</ul>
<p><strong>Set operations</strong></p>
<ul>
<li><a href="#head">head</a></li>
<li><a href="#concat">concat</a></li>
<li><a href="#sample">sample</a></li>
<li><a href="#cut">cut</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#uniq">uniq</a></li>
<li><a href="#freq">freq</a></li>
<li><a href="#inter">inter</a></li>
<li><a href="#filter">filter</a></li>
<li><a href="#filter2">filter2</a></li>
<li><a href="#join">join</a></li>
<li><a href="#split">split</a></li>
<li><a href="#splitxlsx">splitxlsx</a></li>
<li><a href="#collapse">collapse</a></li>
</ul>
<p><strong>Edit</strong></p>
<ul>
<li><a href="#add-header">add-header</a></li>
<li><a href="#del-header">del-header</a></li>
<li><a href="#rename">rename</a></li>
<li><a href="#rename2">rename2</a></li>
<li><a href="#replace">replace</a></li>
<li><a href="#mutate">mutate</a></li>
<li><a href="#mutate2">mutate2</a></li>
<li><a href="#gather">gather</a></li>
</ul>
<p><strong>Ordering</strong></p>
<ul>
<li><a href="#sort">sort</a></li>
</ul>
<p><strong>Ploting</strong></p>
<ul>
<li><a href="#plot">plot</a></li>
<li><a href="#plot-hist">plot hist</a></li>
<li><a href="#plot-box">plot box</a></li>
<li><a href="#plot-line">plot line</a></li>
</ul>
<p><strong>Misc</strong></p>
<ul>
<li><a href="#genautocomplete">genautocomplete</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="csvtk">csvtk</h2>
<p>Usage</p>
<pre><code class="text">csvtk -- a cross-platform, efficient and practical CSV/TSV toolkit

Version: 0.18.0

Author: Wei Shen &lt;shenwei356@gmail.com&gt;

Documents  : http://shenwei356.github.io/csvtk
Source code: https://github.com/shenwei356/csvtk

Attention:

  1. The CSV parser requires all the lines have same number of fields/columns.
     Even lines with spaces will cause error.
     Use '-I/--ignore-illegal-row' to skip these lines if neccessary.
  2. By default, csvtk thinks your files have header row, if not, switch flag &quot;-H&quot; on.
  3. Column names better be unique.
  4. By default, lines starting with &quot;#&quot; will be ignored, if the header row
     starts with &quot;#&quot;, please assign flag &quot;-C&quot; another rare symbol, e.g. '$'.
  5. By default, csvtk handles CSV files, use flag &quot;-t&quot; for tab-delimited files.
  6. If &quot; exists in tab-delimited files, use flag &quot;-l&quot;.
  7. Do not mix use digital fields and column names.

Environment variables for frequently used global flags

  - &quot;CSVTK_T&quot; for flag &quot;-t/--tabs&quot;
  - &quot;CSVTK_H&quot; for flag &quot;-H/--no-header-row&quot;

Usage:
  csvtk [command]

Available Commands:
  add-header      add column names
  collapse        collapse one field with selected fields as keys
  concat          concatenate CSV/TSV files by rows
  csv2json        convert CSV to JSON format
  csv2md          convert CSV to markdown format
  csv2tab         convert CSV to tabular format
  cut             select parts of fields
  del-header      delete column names
  dim             dimensions of CSV file
  filter          filter rows by values of selected fields with arithmetic expression
  filter2         filter rows by awk-like artithmetic/string expressions
  freq            frequencies of selected fields
  gather          gather columns into key-value pairs
  genautocomplete generate shell autocompletion script
  grep            grep data by selected fields with patterns/regular expressions
  head            print first N records
  headers         print headers
  help            Help about any command
  inter           intersection of multiple files
  join            join multiple CSV files by selected fields
  mutate          create new column from selected fields by regular expression
  mutate2         create new column from selected fields by awk-like artithmetic/string expressions
  plot            plot common figures
  pretty          convert CSV to readable aligned table
  rename          rename column names
  rename2         rename column names by regular expression
  replace         replace data of selected fields by regular expression
  sample          sampling by proportion
  sort            sort by selected fields
  space2tab       convert space delimited format to CSV
  split           split CSV/TSV into multiple files according to column values
  splitxlsx       split XLSX sheet into multiple sheets according to column values
  summary         summary statistics of selected digital fields (groupby group fields)
  tab2csv         convert tabular format to CSV
  transpose       transpose CSV data
  uniq            unique data without sorting
  version         print version information and check for update
  xlsx2csv        convert XLSX to CSV format

Flags:
  -c, --chunk-size int         chunk size of CSV reader (default 50)
  -C, --comment-char string    lines starting with commment-character will be ignored. if your header row starts with '#', please assign &quot;-C&quot; another rare symbol, e.g. '$' (default &quot;#&quot;)
  -d, --delimiter string       delimiting character of the input CSV file (default &quot;,&quot;)
  -h, --help                   help for csvtk
  -E, --ignore-empty-row       ignore empty rows
  -I, --ignore-illegal-row     ignore illegal rows
  -l, --lazy-quotes            if given, a quote may appear in an unquoted field and a non-doubled quote may appear in a quoted field
  -H, --no-header-row          specifies that the input CSV file does not have header row
  -j, --num-cpus int           number of CPUs to use (default value depends on your computer) (default 16)
  -D, --out-delimiter string   delimiting character of the output CSV file, e.g., -D $'\t' for tab (default &quot;,&quot;)
  -o, --out-file string        out file (&quot;-&quot; for stdout, suffix .gz for gzipped out) (default &quot;-&quot;)
  -T, --out-tabs               specifies that the output is delimited with tabs. Overrides &quot;-D&quot;
  -t, --tabs                   specifies that the input CSV file is delimited with tabs. Overrides &quot;-d&quot; and &quot;-D&quot;
</code></pre>

<h2 id="headers">headers</h2>
<p>Usage</p>
<pre><code class="text">print headers

Usage:
  csvtk headers [flags]

</code></pre>

<p>Examples</p>
<pre><code class="sh">$ csvtk headers testdata/*.csv
# testdata/1.csv
1       name
2       attr
# testdata/2.csv
1       name
2       major
# testdata/3.csv
1       id
2       name
3       hobby
</code></pre>

<h2 id="dim">dim</h2>
<p>Usage</p>
<pre><code class="text">dimensions of CSV file

Usage:
  csvtk dim [flags]

Aliases:
  dim, size, stats, stat

Flags:
  -h, --help   help for dim

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>with header row</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv | csvtk size
file   num_cols   num_rows
-             4          5
</code></pre>
</li>
<li>
<p>no header row</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat  testdata/digitals.tsv | csvtk size -t -H
file   num_cols   num_rows
-             3          4
</code></pre>
</li>
</ol>
<h2 id="summary">summary</h2>
<p>Usage</p>
<pre><code class="text">summary statistics of selected digital fields (groupby group fields)

Attention:

  1. Do not mix use digital fields and column names.

Available operations:

  # numeric/statistical operations
  # provided by github.com/gonum/stat and github.com/gonum/floats
  countn (count of digits), min, max, sum,
  mean, stdev, variance, median, q1, q2, q3,
  entropy (Shannon entropy),
  prod (product of the elements)

  # textual/numeric operations
  count, first, last, rand, unique, collapse, countunique

Usage:
  csvtk summary [flags]

Flags:
  -n, --decimal-width int   limit floats to N decimal points (default 2)
  -f, --fields strings      operations on these fields. e.g -f 1:count,1:sum or -f colA:mean. available operations: collapse, count, countn, countunique, entropy, first, last, max, mean, median, min, prod, q1, q2, q3, rand, stdev, sum, uniq, variance
  -g, --groups string       group via fields. e.g -f 1,2 or -f columnA,columnB
  -h, --help                help for summary
  -i, --ignore-non-digits   ignore non-digital values like &quot;NA&quot; or &quot;N/A&quot;
  -S, --rand-seed int       rand seed for operation &quot;rand&quot; (default 11)
  -s, --separater string    separater for collapsed data (default &quot;; &quot;)

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ cat testdata/digitals2.csv 
f1,f2,f3,f4,f5
foo,bar,xyz,1,0
foo,bar2,xyz,1.5,-1
foo,bar2,xyz,3,2
foo,bar,xyz,5,3
foo,bar2,xyz,N/A,4
bar,xyz,abc,NA,2
bar,xyz,abc2,1,-1
bar,xyz,abc,2,0
bar,xyz,abc,1,5
bar,xyz,abc,3,100
bar,xyz2,abc3,2,3
bar,xyz2,abc3,2,1
</code></pre>
</li>
<li>
<p>use flag <code>-i/--ignore-non-digits</code></p>
<pre><code>$ cat testdata/digitals2.csv | csvtk summary -f f4:sum
[ERRO] column 4 has non-digital data: N/A, you can use flag -i/--ignore-non-digits to skip these data

$ cat testdata/digitals2.csv | csvtk summary -f f4:sum -i
f4:sum
21.50
</code></pre>
</li>
<li>
<p>multiple fields suported</p>
<pre><code>$ cat testdata/digitals2.csv | csvtk summary -f f4:sum,f5:sum -i
f4:sum,f5:sum
21.50,118.00
</code></pre>
</li>
<li>
<p>using fields instead of colname is still supported</p>
<pre><code>$ cat testdata/digitals2.csv | csvtk summary -f 4:sum,5:sum -i
f4:sum,f5:sum
21.50,118.00
</code></pre>
</li>
<li>
<p>but remember not mixing use digital fields and column names</p>
<pre><code>$ cat testdata/digitals2.csv | csvtk summary -f f4:sum,5:sum -i
[ERRO] column "5" not existed in file: -

$ cat testdata/digitals2.csv | csvtk summary -f 4:sum,f5:sum -i
[ERRO] fail to parse digital field: f5, you may mix use digital fields and column names
</code></pre>
</li>
<li>
<p>groupby</p>
<pre><code>$ cat testdata/digitals2.csv | csvtk summary -i -f f4:sum,f5:sum -g f1,f2 \
    | csvtk pretty
f1    f2     f4:sum   f5:sum
bar   xyz    7.00     106.00
bar   xyz2   4.00     4.00
foo   bar    6.00     3.00
foo   bar2   4.50     5.00
</code></pre>
</li>
<li>
<p>for data without header line</p>
<pre><code>$ cat testdata/digitals2.csv | sed 1d \
    | csvtk summary -H -i -f 4:sum,5:sum -g 1,2 \
    | csvtk pretty
bar   xyz    7.00   106.00
bar   xyz2   4.00   4.00
foo   bar    6.00   3.00
foo   bar2   4.50   5.00
</code></pre>
</li>
<li>
<p>numeric/statistical operations</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f4:countn,f4:mean,f4:stdev,f4:q1,f4:q2,f4:mean,f4:q3,f4:min,f4:max \
    | csvtk pretty
f1    f4:countn   f4:mean   f4:stdev   f4:q1   f4:q2   f4:mean   f4:q3   f4:min   f4:max
bar   6.00        1.83      0.75       1.00    2.00    1.83      2.00    1.00     3.00
foo   4.00        2.62      1.80       1.25    2.25    2.62      4.00    1.00     5.00
</code></pre>
</li>
<li>
<p>textual/numeric operations</p>
<pre><code>$  cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f2:count,f2:first,f2:last,f2:rand,f2:collapse,f2:uniq,f2:countunique \
    | csvtk pretty
f1    f2:count   f2:first   f2:last   f2:rand   f2:collapse                           f2:uniq     f2:countunique
bar   7          xyz        xyz2      xyz2      xyz; xyz; xyz; xyz; xyz; xyz2; xyz2   xyz2; xyz   2
foo   5          bar        bar2      bar2      bar; bar2; bar2; bar; bar2            bar; bar2   2
</code></pre>
</li>
<li>
<p>mixed operations</p>
<pre><code>$  cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f4:collapse,f4:max \
    | csvtk pretty
f1    f4:collapse            f4:max
bar   NA; 1; 2; 1; 3; 2; 2   3.00
foo   1; 1.5; 3; 5; N/A      5.00
</code></pre>
</li>
<li>
<p><code>countn</code> and <code>count</code></p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:count,f4:countn -i \
    | csvtk pretty
f4:count   f4:countn
12         10

$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:count,f4:countn,f4:collapse -i -g f1 \
    | csvtk pretty
f1    f4:count   f4:countn   f4:collapse
bar   7          6           NA; 1; 2; 1; 3; 2; 2
foo   5          4           1; 1.5; 3; 5; N/A
</code></pre>
</li>
</ol>
<h2 id="pretty">pretty</h2>
<p>Usage</p>
<pre><code class="text">convert CSV to readable aligned table

Attention:

  pretty treats the first row as header line and requires them to be unique

Usage:
  csvtk pretty [flags]

Flags:
  -r, --align-right        align right
  -h, --help               help for pretty
  -W, --max-width int      max width
  -w, --min-width int      min width
  -s, --separator string   fields/columns separator (default &quot;   &quot;)

</code></pre>

<p>Examples:</p>
<ol>
<li>
<p>default</p>
<pre><code>$ csvtk pretty testdata/names.csv
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>align right</p>
<pre><code>$ csvtk pretty testdata/names.csv -r
id   first_name   last_name   username
11          Rob        Pike        rob
 2          Ken    Thompson        ken
 4       Robert   Griesemer        gri
 1       Robert    Thompson        abc
NA       Robert        Abel        123
</code></pre>
</li>
<li>
<p>custom separator</p>
<pre><code>$ csvtk pretty testdata/names.csv -s " | "
id | first_name | last_name | username
11 | Rob        | Pike      | rob
2  | Ken        | Thompson  | ken
4  | Robert     | Griesemer | gri
1  | Robert     | Thompson  | abc
NA | Robert     | Abel      | 123
</code></pre>
</li>
</ol>
<h2 id="transpose">transpose</h2>
<p>Usage</p>
<pre><code class="text">transpose CSV data

Usage:
  csvtk transpose [flags]

</code></pre>

<p>Examples</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ csvtk transpose -t  testdata/digitals.tsv
4       1       7       8
5       2       8       1,000
6       3       0       4
</code></pre>
<h2 id="csv2json">csv2json</h2>
<p>Usage</p>
<pre><code class="text">convert CSV to JSON format

Usage:
  csvtk csv2json [flags]

Flags:
  -h, --help            help for csv2json
  -i, --indent string   indent. if given blank, output json in one line. (default &quot;  &quot;)
  -k, --key string      output json as an array of objects keyed by a given filed rather than as a list. e.g -k 1 or -k columnA

</code></pre>

<p>Examples</p>
<ul>
<li>
<p>test data</p>
<pre><code>$ cat data.csv
ID,room,name
3,G13,Simon
5,103,Anna
</code></pre>
</li>
<li>
<p>default operation</p>
<pre><code>$ cat data.csv | csvtk csv2json
[
  {
    "ID": "3",
    "room": "G13",
    "name": "Simon"
  },
  {
    "ID": "5",
    "room": "103",
    "name": "Anna"
  }
]
</code></pre>
</li>
<li>
<p>change indent</p>
<pre><code>$ cat data.csv | csvtk csv2json -i "    "
[
    {
        "ID": "3",
        "room": "G13",
        "name": "Simon"
    },
    {
        "ID": "5",
        "room": "103",
        "name": "Anna"
    }
]
</code></pre>
</li>
<li>
<p>change indent 2)</p>
<pre><code>$ cat data.csv | csvtk csv2json -i ""
[{"ID":"3","room":"G13","name":"Simon"},{"ID":"5","room":"103","name":"Anna"}]
</code></pre>
</li>
<li>
<p>output json as an array of objects keyed by a given filed rather than as a list.</p>
<pre><code>$ cat data.csv | csvtk csv2json -k ID
{
  "3": {
    "ID": "3",
    "room": "G13",
    "name": "Simon"
  },
  "5": {
    "ID": "5",
    "room": "103",
    "name": "Anna"
  }
}
</code></pre>
</li>
<li>
<p>for CSV without header row</p>
<pre><code>$ cat data.csv | csvtk csv2json -H
[
  [
    "ID",
    "room",
    "name"
  ],
  [
    "3",
    "G13",
    "Simon"
  ],
  [
    "5",
    "103",
    "Anna"
  ]
]
</code></pre>
</li>
<li>
<p>for CSV without header row 2)</p>
<pre><code>$ cat data.csv | csvtk csv2json -H -k 1
{
  "ID": [
    "ID",
    "room",
    "name"
  ],
  "3": [
    "3",
    "G13",
    "Simon"
  ],
  "5": [
    "5",
    "103",
    "Anna"
  ]
}
</code></pre>
</li>
</ul>
<h2 id="csv2md">csv2md</h2>
<p>Usage</p>
<pre><code class="text">convert CSV to markdown format

Attention:

  csv2md treats the first row as header line and requires them to be unique

Usage:
  csvtk csv2md [flags]

Flags:
  -a, --alignments string   comma separated alignments. e.g. -a l,c,c,c or -a c (default &quot;l&quot;)
  -w, --min-width int       min width (at least 3) (default 3)

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>give single alignment symbol</p>
<pre><code>$ cat testdata/names.csv | csvtk csv2md -a left
id |first_name|last_name|username
:--|:---------|:--------|:-------
11 |Rob       |Pike     |rob
2  |Ken       |Thompson |ken
4  |Robert    |Griesemer|gri
1  |Robert    |Thompson |abc
NA |Robert    |Abel     |12
</code></pre>
<p>result:</p>
<table>
<thead>
<tr>
<th align="left">id</th>
<th align="left">first_name</th>
<th align="left">last_name</th>
<th align="left">username</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">11</td>
<td align="left">Rob</td>
<td align="left">Pike</td>
<td align="left">rob</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">Ken</td>
<td align="left">Thompson</td>
<td align="left">ken</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">Robert</td>
<td align="left">Griesemer</td>
<td align="left">gri</td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">Robert</td>
<td align="left">Thompson</td>
<td align="left">abc</td>
</tr>
<tr>
<td align="left">NA</td>
<td align="left">Robert</td>
<td align="left">Abel</td>
<td align="left">12</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>give alignment symbols of all fields</p>
<pre><code>$ cat testdata/names.csv | csvtk csv2md -a c,l,l,l
id |first_name|last_name|username
:-:|:---------|:--------|:-------
11 |Rob       |Pike     |rob
2  |Ken       |Thompson |ken
4  |Robert    |Griesemer|gri
1  |Robert    |Thompson |abc
NA |Robert    |Abel     |123
</code></pre>
<p>result</p>
<table>
<thead>
<tr>
<th align="center">id</th>
<th align="left">first_name</th>
<th align="left">last_name</th>
<th align="left">username</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">11</td>
<td align="left">Rob</td>
<td align="left">Pike</td>
<td align="left">rob</td>
</tr>
<tr>
<td align="center">2</td>
<td align="left">Ken</td>
<td align="left">Thompson</td>
<td align="left">ken</td>
</tr>
<tr>
<td align="center">4</td>
<td align="left">Robert</td>
<td align="left">Griesemer</td>
<td align="left">gri</td>
</tr>
<tr>
<td align="center">1</td>
<td align="left">Robert</td>
<td align="left">Thompson</td>
<td align="left">abc</td>
</tr>
<tr>
<td align="center">NA</td>
<td align="left">Robert</td>
<td align="left">Abel</td>
<td align="left">123</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="xlsx2csv">xlsx2csv</h2>
<p>Usage</p>
<pre><code class="text">convert XLSX to CSV format

Usage:
  csvtk xlsx2csv [flags]

Flags:
  -h, --help                help for xlsx2csv
  -a, --list-sheets         list all sheets
  -i, --sheet-index int     Nth sheet to retrieve (default 1)
  -n, --sheet-name string   sheet to retrieve

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>list all sheets</p>
<pre><code>$ csvtk xlsx2csv ../testdata/accounts.xlsx -a
index   sheet
1       names
2       phones
3       region
</code></pre>
</li>
<li>
<p>retrieve sheet by index</p>
<pre><code>$ csvtk xlsx2csv ../testdata/accounts.xlsx -i 3
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
<li>
<p>retrieve sheet by name</p>
<pre><code>$ csvtk xlsx2sv ../testdata/accounts.xlsx -n region
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
</ol>
<h2 id="head">head</h2>
<p>Usage</p>
<pre><code class="text">print first N records

Usage:
  csvtk head [flags]

Flags:
  -n, --number int   print first N records (default 10)

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>with header line</p>
<pre><code>$ csvtk head -n 2 testdata/1.csv
name,attr
foo,cool
bar,handsome
</code></pre>
</li>
<li>
<p>no header line</p>
<pre><code>$ csvtk head -H -n 2 testdata/1.csv
name,attr
foo,cool
</code></pre>
</li>
</ol>
<h2 id="concat">concat</h2>
<p>Usage</p>
<pre><code class="text">concatenate CSV/TSV files by rows

Note that the second and later files are concatenated to the first one,
so only columns match that of the first files kept.

Usage:
  csvtk concat [flags]

Flags:
  -h, --help                    help for concat
  -i, --ignore-case             ignore case (column name)
  -k, --keep-unmatched          keep blanks even if no any data of a file matches
  -u, --unmatched-repl string   replacement for unmatched data

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ csvtk pretty names.csv
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123

$ csvtk pretty  names.reorder.csv
last_name   username   id   first_name
Pike        rob        11   Rob
Thompson    ken        2    Ken
Griesemer   gri        4    Robert
Thompson    abc        1    Robert
Abel        123        NA   Robert

$ csvtk pretty  names.with-unmatched-colname.csv
id2   First_name   Last_name    Username   col
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def
</code></pre>
</li>
<li>
<p>simple one</p>
<pre><code>$ csvtk concat names.csv names.reorder.csv | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>data with unmatched column names, and ignoring cases</p>
<pre><code>$ csvtk concat names.csv names.with-unmatched-colname.csv -i | csvtk pretty
id   first_name   last_name    username
11   Rob          Pike         rob
2    Ken          Thompson     ken
4    Robert       Griesemer    gri
1    Robert       Thompson     abc
NA   Robert       Abel         123
     Rob33        Pike222      rob111
     Ken33        Thompson22   ken111

 $ csvtk concat names.csv names.with-unmatched-colname.csv -i -u Unmached | csvtk pretty
 id         first_name   last_name    username
 11         Rob          Pike         rob
 2          Ken          Thompson     ken
 4          Robert       Griesemer    gri
 1          Robert       Thompson     abc
 NA         Robert       Abel         123
 Unmached   Rob33        Pike222      rob111
 Unmached   Ken33        Thompson22   ken111
</code></pre>
</li>
<li>
<p>Sometimes data of one file does not matche any column, they are discared by default.
  But you can keep them using flag <code>-k/--keep-unmatched</code></p>
<pre><code>$ csvtk concat names.with-unmatched-colname.csv names.csv | csvtk pretty
id2   First_name   Last_name    Username   col
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def

$ csvtk concat names.with-unmatched-colname.csv names.csv -u -k NA | csvtk pretty
id2   First_name   Last_name    Username   col
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
</code></pre>
</li>
</ol>
<h2 id="sample">sample</h2>
<p>Usage</p>
<pre><code class="text">sampling by proportion

Usage:
  csvtk sample [flags]

Flags:
  -h, --help               help for sample
  -n, --line-number        print line number as the first column (&quot;n&quot;)
  -p, --proportion float   sample by proportion
  -s, --rand-seed int      rand seed (default 11)

</code></pre>

<p>Examples</p>
<pre><code class="sh">$ seq 100 | csvtk sample -H -p 0.5 | wc -l
46

$ seq 100 | csvtk sample -H -p 0.5 | wc -l
46

$ seq 100 | csvtk sample -H -p 0.1 | wc -l
10

$  seq 100 | csvtk sample -H -p 0.05 -n
50,50
52,52
65,65
</code></pre>

<h2 id="cut">cut</h2>
<p>Usage</p>
<pre><code class="text">select parts of fields

Usage:
  csvtk cut [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB, or -f -columnA for unselect columnA
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for cut
  -i, --ignore-case     ignore case (column name)

</code></pre>

<p>Examples</p>
<ul>
<li>
<p>data:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>Select columns by column index: <code>csvtk cut -f 1,2</code></p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f 1,2
id,first_name
11,Rob
2,Ken
4,Robert
1,Robert
NA,Robert
</code></pre>
</li>
<li>
<p>Select columns by column names: <code>csvtk cut -f first_name,username</code></p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f first_name,username
first_name,username
Rob,rob
Ken,ken
Robert,gri
Robert,abc
Robert,123
</code></pre>
</li>
<li>
<p><strong>Unselect</strong>:</p>
<ul>
<li>
<p>select 3+ columns: <code>csvtk cut -f -1,-2</code></p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f -1,-2
last_name,username
Pike,rob
Thompson,ken
Griesemer,gri
Thompson,abc
Abel,123
</code></pre>
</li>
<li>
<p>select columns except <code>first_name</code>: <code>csvtk cut -f -first_name</code></p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f -first_name
id,last_name,username
11,Pike,rob
2,Thompson,ken
4,Griesemer,gri
1,Thompson,abc
NA,Abel,123
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Fuzzy fields</strong> using wildcard character,  <code>csvtk cut -F -f "*_name,username"</code></p>
<pre><code>$ cat testdata/names.csv | csvtk cut -F -f "*_name,username"
first_name,last_name,username
Rob,Pike,rob
Ken,Thompson,ken
Robert,Griesemer,gri
Robert,Thompson,abc
Robert,Abel,123
</code></pre>
</li>
<li>
<p>All fields: <code>csvtk cut -F -f "*"</code> (only works when all colnames are unique)</p>
<pre><code>$ cat testdata/names.csv | csvtk cut -F -f "*"
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
NA,Robert,Abel,123
</code></pre>
</li>
<li>
<p>Field ranges:</p>
<ul>
<li>
<p><code>csvtk cut -f 2-4</code> for column 2,3,4</p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f 2-4
first_name,last_name,username
Rob,Pike,rob
Ken,Thompson,ken
Robert,Griesemer,gri
Robert,Thompson,abc
Robert,Abel,123
</code></pre>
</li>
<li>
<p><code>csvtk cut -f -3--1</code> for discarding column 1,2,3</p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f -3--1
username
rob
ken
gri
abc
123
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="uniq">uniq</h2>
<p>Usage</p>
<pre><code class="text">unique data without sorting

Usage:
  csvtk uniq [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case     ignore case

</code></pre>

<p>Examples:</p>
<ul>
<li>
<p>data:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>unique first_name (it removes rows with duplicated first_name)</p>
<pre><code>$ cat testdata/names.csv | csvtk uniq -f first_name
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>unique first_name, a more common way</p>
<pre><code>$ cat testdata/names.csv | csvtk cut -f first_name | csvtk uniq -f 1
first_name
Rob
Ken
Robert
</code></pre>
</li>
</ul>
<h2 id="freq">freq</h2>
<p>Usage</p>
<pre><code class="text">frequencies of selected fields

Usage:
  csvtk freq [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case     ignore case
  -r, --reverse         reverse order while sorting
  -n, --sort-by-freq    sort by frequency
  -k, --sort-by-key     sort by key

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>one filed</p>
<pre><code>$ cat testdata/names.csv | csvtk freq -f first_name | csvtk pretty
first_name   frequency
Ken          1
Rob          1
Robert       3
</code></pre>
</li>
<li>
<p>sort by frequency. you can also use <code>csvtk sort</code> with more sorting options</p>
<pre><code>$ cat testdata/names.csv | csvtk freq -f first_name -n -r | csvtk pretty
first_name   frequency
Robert       3
Ken          1
Rob          1
</code></pre>
</li>
<li>
<p>sorty by key</p>
<pre><code>$ cat testdata/names.csv | csvtk freq -f first_name -k | csvtk pretty
first_name   frequency
Ken          1
Rob          1
Robert       3
</code></pre>
</li>
<li>
<p>multiple fields</p>
<pre><code>$ cat testdata/names.csv | csvtk freq -f first_name,last_name | csvtk pretty
first_name   last_name   frequency
Robert       Abel        1
Ken          Thompson    1
Rob          Pike        1
Robert       Thompson    1
Robert       Griesemer   1
</code></pre>
</li>
<li>
<p>data without header row</p>
<pre><code>$ cat testdata/ testdata/digitals.tsv  | csvtk -t -H freq -f 1
8       1
1       1
4       1
7       1
</code></pre>
</li>
</ol>
<h2 id="inter">inter</h2>
<p>Usage</p>
<pre><code class="text">intersection of multiple files

Usage:
  csvtk inter [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case     ignore case

</code></pre>

<p>Examples:</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/region.csv
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there

$ csvtk inter testdata/phones.csv testdata/region.csv
username
gri
ken
shenwei
</code></pre>
<h2 id="grep">grep</h2>
<p>Usage</p>
<pre><code class="text">grep data by selected fields with patterns/regular expressions

Usage:
  csvtk grep [flags]

Flags:
  --delete-matched        delete a pattern right after being matched, this keeps the firstly matched data and speedups when using regular expressions
  -f, --fields string         comma separated key fields, column name or index. e.g. -f 1-3 or -f id,id2 or -F -f &quot;group*&quot; (default &quot;1&quot;)
  -F, --fuzzy-fields          using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                  help for grep
  -i, --ignore-case           ignore case
  -v, --invert                invert match
  -n, --line-number           print line number as the first column (&quot;n&quot;)
  -N, --no-highlight          no highlight
  -p, --pattern strings       query pattern (multiple values supported)
  -P, --pattern-file string   pattern files (one pattern per line)
  -r, --use-regexp            patterns are regular expression
      --verbose               verbose output

</code></pre>

<p>Examples</p>
<p>Matched parts will be <em>highlight</em></p>
<ul>
<li>
<p>By exact keys</p>
<pre><code>$ cat testdata/names.csv | csvtk grep -f last_name -p Pike -p Abel | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>By regular expression: <code>csvtk grep -f first_name -r -p Rob</code></p>
<pre><code>$ cat testdata/names.csv | csvtk grep -f first_name -r -p Rob | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>By pattern list: <code>csvtk grep -f first_name -P name_list.txt</code></p>
</li>
<li>Remore rows containing missing data (NA): <code>csvtk grep -F -f "*" -r -p "^$" -v</code></li>
<li>show line number<pre><code>$ cat names.csv | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123

$ cat names.csv | csvtk grep -f first_name -r -i -p rob -n | csvtk pretty
n   id   first_name   last_name   username
1   11   Rob          Pike        rob
3   4    Robert       Griesemer   gri
4   1    Robert       Thompson    abc
5   NA   Robert       Abel        123
</code></pre>
</li>
</ul>
<h2 id="filter">filter</h2>
<p>Usage</p>
<pre><code class="text">filter rows by values of selected fields with arithmetic expression

Usage:
  csvtk filter [flags]

Flags:
      --any             print record if any of the field satisfy the condition
  -f, --filter string   filter condition. e.g. -f &quot;age&gt;12&quot; or -f &quot;1,3&lt;=2&quot; or -F -f &quot;c*!=0&quot;
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for filter
  -n, --line-number     print line number as the first column (&quot;n&quot;)

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>single field</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv | csvtk filter -f "id&gt;0" | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
</code></pre>
</li>
<li>
<p>multiple fields</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat  testdata/digitals.tsv | csvtk -t -H filter -f "1-3&gt;0"
4       5       6
1       2       3
8       1,000   4
</code></pre>
<p>using <code>--any</code> to print record if any of the field satisfy the condition</p>
<pre><code>$  cat  testdata/digitals.tsv | csvtk -t -H filter -f "1-3&gt;0" --any
4       5       6
1       2       3
7       8       0
8       1,000   4
</code></pre>
</li>
<li>
<p>fuzzy fields</p>
<pre><code>$  cat testdata/names.csv | csvtk filter -F -f "i*!=0"
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
</code></pre>
</li>
</ol>
<h2 id="filter2">filter2</h2>
<p>Usage</p>
<pre><code class="text">filter rows by awk-like artithmetic/string expressions

The artithmetic/string expression is supported by:

  https://github.com/Knetic/govaluate

Supported operators and types:

  Modifiers: + - / * &amp; | ^ ** % &gt;&gt; &lt;&lt;
  Comparators: &gt; &gt;= &lt; &lt;= == != =~ !~
  Logical ops: || &amp;&amp;
  Numeric constants, as 64-bit floating point (12345.678)
  String constants (single quotes: 'foobar')
  Date constants (single quotes)
  Boolean constants: true false
  Parenthesis to control order of evaluation ( )
  Arrays (anything separated by , within parenthesis: (1, 2, 'foo'))
  Prefixes: ! - ~
  Ternary conditional: ? :
  Null coalescence: ??

Usage:
  csvtk filter2 [flags]

Flags:
  -f, --filter string   awk-like filter condition. e.g. '$age&gt;12' or '$1 &gt; $3' or '$name==&quot;abc&quot;' or '$1 % 2 == 0'
  -h, --help            help for filter2
  -n, --line-number     print line number as the first column (&quot;n&quot;)

</code></pre>

<p>Examples:</p>
<ol>
<li>
<p>filter rows with <code>id</code> greater than 3:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv | csvtk filter2 -f '$id &gt; 3'
id,first_name,last_name,username
11,Rob,Pike,rob
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>arithmetic and string expressions</p>
<pre><code>$ cat testdata/names.csv | csvtk filter2 -f '$id &gt; 3 || $username=="ken"'
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>More arithmetic expressions</p>
<pre><code>$ cat testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat testdata/digitals.tsv | csvtk filter2 -H -t -f '$1 &gt; 2 &amp;&amp; $2 % 2 == 0'
7       8       0
8       1,000   4

# comparison between fields and support
$ cat testdata/digitals.tsv | csvtk filter2 -H -t -f '$2 &lt;= $3 || ( $1 / $2 &gt; 0.5 )'
4       5       6
1       2       3
7       8       0
</code></pre>
</li>
</ol>
<h2 id="join">join</h2>
<p>Usage</p>
<pre><code class="text">join 2nd and later files to the first file by selected fields.

Multiple keys supported, but the orders are ignored.

Usage:
  csvtk join [flags]

Flags:
  -f, --fields string    Semicolon separated key fields of all files, if given one, we think all the files have the same key columns. Fields of different files should be separated by &quot;;&quot;, e.g -f &quot;1;2&quot; or -f &quot;A,B;C,D&quot; or -f id (default &quot;1&quot;)
      --fill string      fill content for unmatched data
  -F, --fuzzy-fields     using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case      ignore case
  -k, --keep-unmatched   keep unmatched data of the first file

</code></pre>

<p>Examples:</p>
<ul>
<li>
<p>data</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/region.csv
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
<li>
<p>All files have same key column: <code>csvtk join -f id file1.csv file2.csv</code></p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv
username,phone,region
gri,11111,somewhere
ken,22222,nowhere
shenwei,999999,another
</code></pre>
</li>
<li>
<p>keep unmatched</p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv --keep-unmatched
username,phone,region
gri,11111,somewhere
rob,12345,
ken,22222,nowhere
shenwei,999999,another
</code></pre>
</li>
<li>
<p>keep unmatched and fill with something</p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv --keep-unmatched --fill NA
username,phone,region
gri,11111,somewhere
rob,12345,NA
ken,22222,nowhere
shenwei,999999,another
</code></pre>
</li>
<li>
<p>Files have different key columns: <code>csvtk join -f "username;username;name" testdata/names.csv phone.csv adress.csv -k</code>. <strong><em>Note that fields are separated with <code>;</code> not <code>,</code>.</em></strong></p>
<pre><code>$ csvtk join -f "username;name"  testdata/phones.csv testdata/region.csv
username,phone,region
gri,11111,somewhere
ken,22222,nowhere
shenwei,999999,another
</code></pre>
</li>
<li>
<p>The 2nd or later files have entries with same ID:</p>
<pre><code>$ cat testdata/1.csv
name,attr
foo,cool
bar,handsome
bob,beutiful

$ cat testdata/2.csv
name,major
bar,bioinformatics
bob,microbiology
bob,computer science

$ cat testdata/3.csv
id,name,hobby
1,bar,baseball
2,bob,basketball
3,foo,football
4,wei,programming

$ csvtk join testdata/1.csv testdata/2.csv  | csvtk pretty
name   attr       major
bar    handsome   bioinformatics
bob    beutiful   microbiology
bob    beutiful   computer science

$ csvtk join testdata/{1,2,3}.csv -f name -k | csvtk pretty
name   attr       major               id   hobby
foo    cool                           3    football
bar    handsome   bioinformatics      1    baseball
bob    beutiful   microbiology        2    basketball
bob    beutiful   computer science    2    basketball

$ csvtk join testdata/{3,1,2}.csv -f name -k | csvtk pretty
id   name   hobby         attr       major
1    bar    baseball      handsome   bioinformatics
2    bob    basketball    beutiful   computer science
2    bob    basketball    beutiful   computer science
3    foo    football      cool
4    wei    programming
</code></pre>
</li>
</ul>
<h2 id="split">split</h2>
<p>Usage</p>
<pre><code class="text">split CSV/TSV into multiple files according to column values

Note:

  1. flag -o/--out-file can specify out directory for splitted files

Usage:
  csvtk split [flags]

Flags:
  -g, --buf-groups int   buffering N groups before writing to file (default 100)
  -b, --buf-rows int     buffering N rows for every group before writing to file (default 100000)
  -f, --fields string    comma separated key fields, column name or index. e.g. -f 1-3 or -f id,id2 or -F -f &quot;group*&quot; (default &quot;1&quot;)
  -F, --fuzzy-fields     using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help             help for split
  -i, --ignore-case      ignore case
  -G, --out-gzip         force output gzipped file

</code></pre>

<p>Examples</p>
<ol>
<li>
<p>Test data</p>
<pre><code>$ cat names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>split according to <code>first_name</code></p>
<pre><code>$ csvtk split names.csv -f first_name
$ ls *.csv
names.csv  names-Ken.csv  names-Rob.csv  names-Robert.csv

$ cat names-Ken.csv
id,first_name,last_name,username
2,Ken,Thompson,ken

$ cat names-Rob.csv
id,first_name,last_name,username
11,Rob,Pike,rob

$ cat names-Robert.csv
id,first_name,last_name,username
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
NA,Robert,Abel,123
</code></pre>
</li>
<li>
<p>split according to <code>first_name</code> and <code>last_name</code></p>
<pre><code>$ csvtk split names.csv -f first_name,last_name
$ ls *.csv
names.csv               names-Robert-Abel.csv       names-Robert-Thompson.csv
names-Ken-Thompson.csv  names-Robert-Griesemer.csv  names-Rob-Pike.csv
</code></pre>
</li>
<li>
<p>flag <code>`-o/--out-file</code> can specify out directory for splitted files</p>
<pre><code>$ seq 10000 | csvtk split -H -o result
$ ls result/*.csv | wc -l
10000
</code></pre>
</li>
<li>
<p>extreme example 1: lots (1M) of rows in groups</p>
<pre><code>$ yes 2 | head -n 10000000 | gzip -c &gt; t.gz

$ memusg -t ./csvtk -H split t.gz
elapsed time: 7.959s
peak rss: 35.7 MB

# check
$ zcat t-2.gz | wc -l
10000000
$ zcat t-2.gz | md5sum
f194afd7cecf645c0e3cce50c9bc526e  -
$ zcat t.gz | md5sum
f194afd7cecf645c0e3cce50c9bc526e  -
</code></pre>
</li>
<li>
<p>extreme example 2: lots (10K) of groups</p>
<pre><code>$ seq 10000 | gzip -c &gt; t2.gz

$ memusg -t ./csvtk -H split t2.gz  -o t2
elapsed time: 20.856s
peak rss: 23.77 MB

# check
$ ls t2/*.gz | wc -l
10000
$ zcat t2/*.gz | sort -k 1,1n | md5sum
72d4ff27a28afbc066d5804999d5a504  -
$ zcat t2.gz | md5sum
72d4ff27a28afbc066d5804999d5a504  -
</code></pre>
</li>
</ol>
<h2 id="splitxlsx">splitxlsx</h2>
<p>Usage</p>
<pre><code class="text">split XLSX sheet into multiple sheets according to column values

Strengths: Sheet properties are remained unchanged.
Weakness : Complicated sheet structures are not well supported, e.g.,
  1. merged cells
  2. more than one header row

Usage:
  csvtk splitxlsx [flags]

Flags:
  -f, --fields string       comma separated key fields, column name or index. e.g. -f 1-3 or -f id,id2 or -F -f &quot;group*&quot; (default &quot;1&quot;)
  -F, --fuzzy-fields        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                help for splitxlsx
  -i, --ignore-case         ignore case (cell value)
  -a, --list-sheets         list all sheets
  -I, --sheet-index int     Nth sheet to retrieve (default 1)
  -n, --sheet-name string   sheet to retrieve
</code></pre>

<p>Examples</p>
<ol>
<li>
<p>example data</p>
<pre><code># list all sheets
$ csvtk xlsx2csv -a accounts.xlsx
index   sheet
1       names
2       phones
3       region

# data of sheet "names"
$ csvtk xlsx2csv accounts.xlsx | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>split sheet "names" according to <code>first_name</code></p>
<pre><code>$ csvtk splitxlsx accounts.xlsx -n names -f first_name

$ ls accounts.*
accounts.split.xlsx  accounts.xlsx

$ csvtk splitxlsx -a accounts.split.xlsx
index   sheet
1       names
2       phones
3       region
4       Rob
5       Ken
6       Robert

$ csvtk xlsx2csv accounts.split.xlsx -n Rob | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob

$ csvtk xlsx2csv accounts.split.xlsx -n Robert | csvtk pretty
id   first_name   last_name   username
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
</ol>
<h2 id="collapse">collapse</h2>
<p>Usage</p>
<pre><code class="text">collapse one field with selected fields as keys

Usage:
  csvtk collapse [flags]

Flags:
  -f, --fields string      key fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields       using fuzzy fields (only for key fields), e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help               help for collapse
  -i, --ignore-case        ignore case
  -s, --separater string   separater for collapsed data (default &quot;; &quot;)
  -v, --vfield string      value field

</code></pre>

<p>examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ csvtk pretty teachers.csv
lab                     teacher   class
computational biology   Tom       Bioinformatics
computational biology   Tom       Statistics
computational biology   Rob       Bioinformatics
sequencing center       Jerry     Bioinformatics
sequencing center       Nick      Molecular Biology
sequencing center       Nick      Microbiology
</code></pre>
</li>
<li>
<p>List teachers for every lab/class. <code>uniq</code> is used to deduplicate items.</p>
<pre><code>$ cat teachers.csv  \
    | csvtk uniq -f lab,teacher  \
    | csvtk collapse -f lab -v teacher \
    | csvtk pretty

lab                     teacher
computational biology   Tom; Rob
sequencing center       Jerry; Nick

$ cat teachers.csv  \
    | csvtk uniq -f class,teacher  \
    | csvtk collapse -f class -v teacher -s ", " \
    | csvtk pretty

class               teacher
Statistics          Tom
Bioinformatics      Tom, Rob, Jerry
Molecular Biology   Nick
Microbiology        Nick
</code></pre>
</li>
<li>
<p>Multiple key fields supported</p>
<pre><code>$ cat teachers.csv  \
    | csvtk collapse -f teacher,lab -v class \
    | csvtk pretty

teacher   lab                     class
Tom       computational biology   Bioinformatics; Statistics
Rob       computational biology   Bioinformatics
Jerry     sequencing center       Bioinformatics
Nick      sequencing center       Molecular Biology; Microbiology
</code></pre>
</li>
</ol>
<h2 id="add-header">add-header</h2>
<p>Usage</p>
<pre><code class="text">add column names

Usage:
  csvtk add-header [flags]

Flags:
  -h, --help            help for add-header
  -n, --names strings   column names to add, in CSV format

</code></pre>

<p>Examples:</p>
<ol>
<li>
<p>No new colnames given:</p>
<pre><code>$ seq 3 | csvtk mutate -H | csvtk add-header
[WARN] colnames not given, c1, c2, c3... will be used
c1,c2
1,1
2,2
3,3
</code></pre>
</li>
<li>
<p>Adding new colnames:</p>
<pre><code>$ seq 3 | csvtk mutate -H | csvtk add-header -n a,b
a,b
1,1
2,2
3,3
$ seq 3 | csvtk mutate -H | csvtk add-header -n a -n b
a,b
1,1
2,2
3,3

$ seq 3 | csvtk mutate -H -t | csvtk add-header -t -n a,b
a       b
1       1
2       2
3       3
</code></pre>
</li>
</ol>
<h2 id="del-header">del-header</h2>
<p>Usage</p>
<pre><code class="text">delete column names

Usage:
  csvtk del-header [flags]

Flags:
  -h, --help   help for del-header

</code></pre>

<p>Examples:</p>
<pre><code>$ seq 3 | csvtk add-header
c1
1
2
3

$ seq 3 | csvtk add-header | csvtk del-header
1
2
3

$ seq 3 | ./csvtk del-header -H
1
2
3
</code></pre>
<h2 id="rename">rename</h2>
<p>Usage</p>
<pre><code class="text">rename column names

Usage:
  csvtk rename [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -n, --names string    comma separated new names

</code></pre>

<p>Examples:</p>
<ul>
<li>Setting new names: <code>csvtk rename -f A,B -n a,b</code> or <code>csvtk rename -f 1-3 -n a,b,c</code><pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv | csvtk rename -f 1 -n 姓名
姓名,phone
gri,11111
rob,12345
ken,22222
shenwei,999999
</code></pre>
</li>
</ul>
<h2 id="rename2">rename2</h2>
<p>Usage</p>
<pre><code class="text">rename column names by regular expression

Special replacement symbols:

    {nr}  ascending number, starting from 1
    {kv}  Corresponding value of the key (captured variable $n) by key-value file,
          n can be specified by flag -I (--key-capt-idx) (default: 1)

Usage:
  csvtk rename2 [flags]

Flags:
  -f, --fields string          select only these fields. e.g -f 1,2 or -f columnA,columnB
  -F, --fuzzy-fields           using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                   help for rename2
  -i, --ignore-case            ignore case
  -K, --keep-key               keep the key as value when no value found for the key
  -I, --key-capt-idx int       capture variable index of key (1-based) (default 1)
      --key-miss-repl string   replacement for key with no corresponding value
  -k, --kv-file string         tab-delimited key-value file for replacing key with value when using &quot;{kv}&quot; in -r (--replacement)
  -p, --pattern string         search regular expression
  -r, --replacement string     renamement. supporting capture variables.  e.g. $1 represents the text of the first submatch. ATTENTION: use SINGLE quote NOT double quotes in *nix OS or use the \ escape character. Ascending number is also supported by &quot;{nr}&quot;.use ${1} instead of $1 when {kv} given!

</code></pre>

<p>Examples:</p>
<ul>
<li>
<p>replacing with original names by regular express: <code>cat testdata/c.csv | csvtk rename2 -F -f "*" -p "(.*)" -r 'prefix_$1'</code> for adding prefix to all column names.</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv | csvtk rename2 -F -f "*" -p "(.*)" -r 'prefix_${1}_suffix'
prefix_username_suffix,prefix_phone_suffix
gri,11111
rob,12345
ken,22222
shenwei,999999
</code></pre>
</li>
<li>
<p>supporting <code>{kv}</code> and <code>{nr}</code> in <code>csvtk replace</code>. e.g., replace barcode with sample name.</p>
<pre><code>$ cat barcodes.tsv
Sample  Barcode
sc1     CCTAGATTAAT
sc2     GAAGACTTGGT
sc3     GAAGCAGTATG
sc4     GGTAACCTGAC
sc5     ATAGTTCTCGT

$ cat table.tsv
gene    ATAGTTCTCGT     GAAGCAGTATG     GAAGACTTGGT     AAAAAAAAAA
gene1   0       0       3       0
gen1e2  0       0       0       0

# note that, we must arrange the order of barcodes.tsv to KEY-VALUE
$ csvtk cut -t -f 2,1 barcodes.tsv
Barcode Sample
CCTAGATTAAT     sc1
GAAGACTTGGT     sc2
GAAGCAGTATG     sc3
GGTAACCTGAC     sc4
ATAGTTCTCGT     sc5

# here we go!!!!

$ csvtk rename2 -t -k &lt;(csvtk cut -t -f 2,1 barcodes.tsv) -f -1 -p '(.+)' -r '{kv}' --key-miss-repl unknown table.tsv
gene    sc5     sc3     sc2     unknown
gene1   0       0       3       0
gen1e2  0       0       0       0
</code></pre>
</li>
<li>
<p><code>{nr}</code>, incase you need this</p>
<pre><code>$ echo "a,b,c,d" | csvtk rename2  -p '(.+)' -r 'col_{nr}' -f -1 --start-num 2
a,col_2,col_3,col_4
</code></pre>
</li>
</ul>
<h2 id="replace">replace</h2>
<p>Usage</p>
<pre><code class="text">replace data of selected fields by regular expression

Note that the replacement supports capture variables.
e.g. $1 represents the text of the first submatch.
ATTENTION: use SINGLE quote NOT double quotes in *nix OS.

Examples: Adding space to all bases.

  csvtk replace -p &quot;(.)&quot; -r '$1 ' -s

Or use the \ escape character.

  csvtk replace -p &quot;(.)&quot; -r &quot;\$1 &quot; -s

more on: http://shenwei356.github.io/csvtk/usage/#replace

Special replacement symbols:

  {nr}    Record number, starting from 1
  {kv}    Corresponding value of the key (captured variable $n) by key-value file,
          n can be specified by flag -I (--key-capt-idx) (default: 1)

Usage:
  csvtk replace [flags]


Flags:
  -f, --fields string          select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields           using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case            ignore case
  -K, --keep-key               keep the key as value when no value found for the key
  -I, --key-capt-idx int       capture variable index of key (1-based) (default 1)
      --key-miss-repl string   replacement for key with no corresponding value
  -k, --kv-file string         tab-delimited key-value file for replacing key with value when using &quot;{kv}&quot; in -r (--replacement)
  -p, --pattern string         search regular expression
  -r, --replacement string     replacement. supporting capture variables.  e.g. $1 represents the text of the first submatch. ATTENTION: for *nix OS, use SINGLE quote NOT double quotes or use the \ escape character. Record number is also supported by &quot;{nr}&quot;.use ${1} instead of $1 when {kv} given!

</code></pre>

<p>Examples</p>
<ul>
<li>remove Chinese charactors:  <code>csvtk replace -F -f "*_name" -p "\p{Han}+" -r ""</code></li>
<li>replace by key-value files: <code>csvtk replace -f 1 -p "(.+)" -r "value of $1 is {kv}" -k kv.tsv</code><pre><code>$ cat data.tsv
name    id
A       ID001
B       ID002
C       ID004

$ cat alias.tsv
001     Tom
002     Bob
003     Jim

$ csvtk replace -t -f 2  -p "ID(.+)" -r "N: {nr}, alias: {kv}" -k alias.tsv  data.tsv
[INFO] read key-value file: alias.tsv
[INFO] 3 pairs of key-value loaded
name    id
A       N: 1, alias: Tom
B       N: 2, alias: Bob
C       N: 3, alias: 004
</code></pre>
</li>
</ul>
<h2 id="mutate">mutate</h2>
<p>Usage</p>
<pre><code class="text">create new column from selected fields by regular expression

Usage:
  csvtk mutate [flags]

Flags:
  -f, --fields string    select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -i, --ignore-case      ignore case
      --na               for unmatched data, use blank instead of original data
  -n, --name string      new column name
  -p, --pattern string   search regular expression with capture bracket. e.g. (default &quot;^(.+)$&quot;)

</code></pre>

<p>Examples</p>
<ul>
<li>In default, copy a column: <code>csvtk mutate -f id -n newname</code></li>
<li>extract prefix of data as group name using regular expression (get "A" from "A.1" as group name):
  <code>csvtk mutate -f sample -n group -p "^(.+?)\."</code></li>
<li>get the first letter as new column<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv | csvtk mutate -f username -p "^(\w)" -n first_letter
username,phone,first_letter
gri,11111,g
rob,12345,r
ken,22222,k
shenwei,999999,s
</code></pre>
</li>
</ul>
<h2 id="mutate2">mutate2</h2>
<p>Usage</p>
<pre><code class="text">create new column from selected fields by awk-like artithmetic/string expressions

The artithmetic/string expression is supported by:

  https://github.com/Knetic/govaluate

Supported operators and types:

  Modifiers: + - / * &amp; | ^ ** % &gt;&gt; &lt;&lt;
  Comparators: &gt; &gt;= &lt; &lt;= == != =~ !~
  Logical ops: || &amp;&amp;
  Numeric constants, as 64-bit floating point (12345.678)
  String constants (single quotes: 'foobar')
  Date constants (single quotes)
  Boolean constants: true false
  Parenthesis to control order of evaluation ( )
  Arrays (anything separated by , within parenthesis: (1, 2, 'foo'))
  Prefixes: ! - ~
  Ternary conditional: ? :
  Null coalescence: ??

Usage:
  csvtk mutate2 [flags]

Flags:
  -L, --digits int          number of digits after the dot (default 2)
  -s, --digits-as-string    treate digits as string to avoid converting big digits into scientific notation
  -e, --expression string   arithmetic/string expressions. e.g. &quot;'string'&quot;, '&quot;abc&quot;', ' $a + &quot;-&quot; + $b ', '$1 + $2', '$a / $b', ' $1 &gt; 100 ? &quot;big&quot; : &quot;small&quot; '
  -h, --help                help for mutate2
  -n, --name string         new column name

</code></pre>

<p>Example</p>
<ol>
<li>
<p>Constants</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e " 'abc' "
4       5       6       abc
1       2       3       abc
7       8       0       abc
8       1,000   4       abc

$ val=123 &amp;&amp; cat testdata/digitals.tsv | csvtk mutate2 -t -H -e " $val "
4       5       6       123
1       2       3       123
7       8       0       123
8       1,000   4       123
</code></pre>
</li>
<li>
<p>String concatenation</p>
<pre><code>$ cat testdata/names.csv  \
    | csvtk mutate2 -n full_name -e ' $first_name + " " + $last_name ' \
    | csvtk pretty
id   first_name   last_name   username   full_name
11   Rob          Pike        rob        Rob Pike
2    Ken          Thompson    ken        Ken Thompson
4    Robert       Griesemer   gri        Robert Griesemer
1    Robert       Thompson    abc        Robert Thompson
NA   Robert       Abel        123        Robert Abel
</code></pre>
</li>
<li>
<p>Math</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 + $3' -L 0
4       5       6       10
1       2       3       4
7       8       0       7
8       1,000   4       12
</code></pre>
</li>
<li>
<p>Bool</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 &gt; 5'
4       5       6       false
1       2       3       false
7       8       0       true
8       1,000   4       true
</code></pre>
</li>
<li>
<p>Ternary conditional</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 &gt; 5 ? "big" : "small" '
4       5       6       small
1       2       3       small
7       8       0       big
8       1,000   4       big
</code></pre>
</li>
</ol>
<h2 id="gather">gather</h2>
<p>Usage</p>
<pre><code class="text">gather columns into key-value pairs

Usage:
  csvtk gather [flags]

Flags:
  -f, --fields string   fields for gathering. e.g -f 1,2 or -f columnA,columnB, or -f -columnA for unselect columnA
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -k, --key string      name of key column to create in output
  -v, --value string    name of value column to create in output

</code></pre>

<p>Examples:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123

$ cat testdata/names.csv | csvtk gather -k item -v value -f -1
id,item,value
11,first_name,Rob
11,last_name,Pike
11,username,rob
2,first_name,Ken
2,last_name,Thompson
2,username,ken
4,first_name,Robert
4,last_name,Griesemer
4,username,gri
1,first_name,Robert
1,last_name,Thompson
1,username,abc
NA,first_name,Robert
NA,last_name,Abel
NA,username,123
</code></pre>
<h2 id="sort">sort</h2>
<p>Usage</p>
<pre><code class="text">sort by selected fields

Usage:
  csvtk sort [flags]

Flags:
  -h, --help             help for sort
  -i, --ignore-case      ignore-case
  -k, --keys strings     keys (multiple values supported). sort type supported, &quot;N&quot; for natural order, &quot;n&quot; for number, &quot;u&quot; for user-defined order and &quot;r&quot; for reverse. e.g., &quot;-k 1&quot; or &quot;-k A:r&quot; or &quot;&quot;-k 1:nr -k 2&quot; (default [1])
  -L, --levels strings   user-defined level file (one level per line, multiple values supported). format: &lt;field&gt;:&lt;level-file&gt;.  e.g., &quot;-k name:u -L name:level.txt&quot;
</code></pre>

<p>Examples</p>
<ul>
<li>
<p>data</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>By single column : <code>csvtk sort -k 1</code> or <code>csvtk sort -k last_name</code></p>
<ul>
<li>
<p>in alphabetical order</p>
<pre><code>$ cat testdata/names.csv | csvtk sort -k first_name
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>in reversed alphabetical order</p>
<pre><code>$ cat testdata/names.csv | csvtk sort -k first_name:r
id,first_name,last_name,username
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
11,Rob,Pike,rob
2,Ken,Thompson,ken
</code></pre>
</li>
<li>
<p>in numerical order</p>
<pre><code>$ cat testdata/names.csv | csvtk sort -k id:n
id,first_name,last_name,username
NA,Robert,Abel,123
1,Robert,Thompson,abc
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
11,Rob,Pike,rob
</code></pre>
</li>
<li>
<p>in natural order</p>
<pre><code>$ cat testdata/names.csv | csvtk sort -k id:N
id,first_name,last_name,username
1,Robert,Thompson,abc
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
11,Rob,Pike,rob
NA,Robert,Abel,123
</code></pre>
</li>
</ul>
</li>
<li>
<p>By multiple columns: <code>csvtk sort -k 1,2</code> or <code>csvtk sort -k 1 -k 2</code> or <code>csvtk sort -k last_name,age</code></p>
<pre><code># by first_name and then last_name
$ cat testdata/names.csv | csvtk sort -k first_name -k last_name
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
4,Robert,Griesemer,gri
1,Robert,Thompson,abc

# by first_name and then ID
$ cat testdata/names.csv | csvtk sort -k first_name -k id:n
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>By <strong><em>user-defined order</em></strong></p>
<pre><code># user-defined order/level
$ cat testdata/size_level.txt
tiny
mini
small
medium
big

# original data
$ cat testdata/size.csv
id,size
1,Huge
2,Tiny
3,Big
4,Small
5,Medium

$ csvtk sort -k 2:u -i -L 2:testdata/size_level.txt testdata/size.csv
id,size
2,Tiny
4,Small
5,Medium
3,Big
1,Huge
</code></pre>
</li>
</ul>
<h2 id="plot">plot</h2>
<p>Usage</p>
<pre><code class="text">plot common figures

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot [command]

Available Commands:
  box         plot boxplot
  hist        plot histogram
  line        line plot and scatter plot

Flags:
      --axis-width float     axis width (default 1.5)
  -f, --data-field string    column index or column name of data (default &quot;1&quot;)
      --format string        image format for stdout when flag -o/--out-file not given. available values: eps, jpg|jpeg, pdf, png, svg, and tif|tiff. (default &quot;png&quot;)
  -g, --group-field string   column index or column name of group
      --height float         Figure height (default 4.5)
      --label-size int       label font size (default 14)
      --tick-width float     axis tick width (default 1.5)
      --title string         Figure title
      --title-size int       title font size (default 16)
      --width float          Figure width (default 6)
      --x-max string         maximum value of X axis
      --x-min string         minimum value of X axis
      --xlab string          x label text
      --y-max string         maximum value of Y axis
      --y-min string         minimum value of Y axis
      --ylab string          y label text

</code></pre>

<p><strong><em>Note that most of the flags of <code>plot</code> are global flags of the subcommands
<code>hist</code>, <code>box</code> and <code>line</code></em></strong></p>
<p><strong>Notes of image output</strong></p>
<ol>
<li>Output file can be set by flag -o/--out-file.</li>
<li>File format is determined by the out file suffix.
   Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff</li>
<li>If flag -o/--out-file not set (default), image is written to stdout,
   you can display the image by pipping to "display" command of Imagemagic
   or just redirect to file.</li>
</ol>
<h2 id="plot-hist">plot hist</h2>
<p>Usage</p>
<pre><code class="text">plot histogram

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot hist [flags]

Flags:
      --bins int          number of bins (default 50)
      --color-index int   color index, 1-7 (default 1)

</code></pre>

<p>Examples</p>
<ul>
<li>
<p>example data</p>
<pre><code>$ zcat testdata/grouped_data.tsv.gz | head -n 5 | csvtk -t pretty
Group     Length   GC Content
Group A   97       57.73
Group A   95       49.47
Group A   97       49.48
Group A   100      51.00
</code></pre>
</li>
<li>
<p>plot histogram with data of the second column:
<code>csvtk -t plot hist testdata/grouped_data.tsv.gz -f 2 --title Histogram -o histogram.png</code></p>
<p><img alt="histogram.png" src="../testdata/figures/histogram.png" /></p>
</li>
<li>
<p>You can also write image to stdout and pipe to "display" command of Imagemagic:
<code>csvtk -t plot hist testdata/grouped_data.tsv.gz -f 2 | display</code></p>
</li>
</ul>
<h2 id="plot-box">plot box</h2>
<p>Usage</p>
<pre><code class="text">plot boxplot

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot box [flags]

Flags:
      --box-width float   box width
      --horiz             horize box plot

</code></pre>

<p>Examples</p>
<ul>
<li>
<p>plot boxplot with data of the "GC Content" (third) column,
group information is the "Group" column.
<code>csvtk -t plot box testdata/grouped_data.tsv.gz -g "Group" -f "GC Content"  --width 3 --title "Box plot &gt; boxplot.png"</code></p>
<p><img alt="boxplot.png" src="../testdata/figures/boxplot.png" /></p>
</li>
<li>
<p>plot horiz boxplot with data of the "Length" (second) column,
group information is the "Group" column.
<code>csvtk -t plot box testdata/grouped_data.tsv.gz -g "Group" -f "Length"  --height 3 --width 5 --horiz --title "Horiz box plot &gt; boxplot2.png"</code></p>
<p><img alt="boxplot2.png" src="../testdata/figures/boxplot2.png" /></p>
</li>
</ul>
<h2 id="plot-line">plot line</h2>
<p>Usage</p>
<pre><code class="text">line plot and scatter plot

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot line [flags]

Flags:
  -x, --data-field-x string   column index or column name of X for command line
  -y, --data-field-y string   column index or column name of Y for command line
      --legend-left           locate legend along the left edge of the plot
      --legend-top            locate legend along the top edge of the plot
      --line-width float      line width (default 1.5)
      --point-size float      point size (default 3)
      --scatter               only plot points

</code></pre>

<p>Examples</p>
<ul>
<li>
<p>example data</p>
<pre><code>$ head -n 5 testdata/xy.tsv
Group   X       Y
A       0       1
A       1       1.3
A       1.5     1.5
A       2.0     2
</code></pre>
</li>
<li>
<p>plot line plot with X-Y data
<code>csvtk -t plot line testdata/xy.tsv -x X -y Y -g Group --title "Line plot" &gt; lineplot.png</code></p>
<p><img alt="lineplot.png" src="../testdata/figures/lineplot.png" /></p>
</li>
<li>
<p>plot scatter
<code>csvtk -t plot line testdata/xy.tsv -x X -y Y -g Group --title "Scatter" --scatter &gt; lineplot.png</code></p>
<p><img alt="scatter.png" src="../testdata/figures/scatter.png" /></p>
</li>
</ul>
<h2 id="genautocomplete">genautocomplete</h2>
<p>Usage</p>
<pre><code class="text">generate shell autocompletion script

Note: The current version supports Bash only.
This should work for *nix systems with Bash installed.

Howto:

1. run: csvtk genautocomplete

2. create and edit ~/.bash_completion file if you don't have it.

        nano ~/.bash_completion

   add the following:

        for bcfile in ~/.bash_completion.d/* ; do
          . $bcfile
        done

Usage:
  csvtk genautocomplete [flags]

Flags:
      --file string   autocompletion file (default &quot;/home/shenwei/.bash_completion.d/csvtk.sh&quot;)
  -h, --help          help for genautocomplete
      --type string   autocompletion type (currently only bash supported) (default &quot;bash&quot;)

</code></pre>

<div id="disqus_thread"></div>

<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//csvtk.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
